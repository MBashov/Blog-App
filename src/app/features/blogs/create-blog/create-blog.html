<section class="form-section">
    <div class="form-container">
        <h2>Create Post</h2>

        <form [formGroup]="blogForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data" novalidate>
            <label for="title">Title</label>
            <input 
                id="title"
                type="text" 
                formControlName="title" 
            />
            @if(blogForm.get('title')?.errors?.['required'] && blogForm.get('title')?.touched) {
                <p class="error-msg">Title is required!</p>
            }
            @if(blogForm.get('title')?.errors?.['minlength'] && blogForm.get('title')?.touched) {
                <p class="error-msg">Title must be at least 5 characters!</p>
            }

            <label for="slug">Slug</label>
            <input 
                id="slug"
                type="text" 
                formControlName="slug" 
            />

            <label for="content">Content</label>
            <textarea 
                id="content"
                rows="8" 
                formControlName="content">
            </textarea>
            @if(blogForm.get('content')?.errors?.['required'] && blogForm.get('content')?.touched) {
                <p class="error-msg">Content is required!</p>
            }
            @if(blogForm.get('content')?.errors?.['minlength'] && blogForm.get('content')?.touched) {
                <p class="error-msg">Content must be at least 100 characters!</p>
            }

            <label for="banner-url">Banner Image</label>
            <input 
                id="banner-url"
                type="file" 
                accept="image/png, image/jpeg, image/jpg, image/webp" 
                (change)="onFileChange($event)" 
                formControlName="bannerImage"
            />
            @if(blogForm.get('bannerImage')?.invalid && blogForm.get('bannerImage')?.touched) {
                <p class="error-msg">Image is required!</p>
            }
            @if (blogForm.get('bannerImage')?.errors?.['invalidType']) {
                <p class="error-msg">Unsupported file type. Please upload a PNG, JPEG, JPG, or WEBP image.</p>
            }

            <label for="status">Status</label>
            <select id="status" formArrayName="status">
                <option value="published">Published</option>
                <option value="draft">Draft</option>
            </select>
            <button [disabled]="blogForm.invalid" type="submit">Submit Post</button>
        </form>
    </div>
</section>